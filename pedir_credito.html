<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pedir Crédito — Co-Siembra Digital</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <style>
    body { font-family: 'Poppins', sans-serif; background:#f6f8fa; color:#222; padding:20px; }
    .container { max-width:760px; margin:30px auto; background:#fff; padding:24px; border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,0.08); }
    h1 { color:#2A9D8F; margin-bottom:8px; }
    p.lead { color:#555; margin-bottom:20px; }
    form .row { display:flex; gap:12px; }
    label { font-weight:600; font-size:0.95rem; margin-bottom:6px; display:block; }
    input, select, textarea { width:100%; padding:10px 12px; border-radius:8px; border:1px solid #ddd; }
    .field { margin-bottom:14px; }
    .actions { display:flex; gap:12px; justify-content:flex-end; margin-top:12px; }
    button { background:#2A9D8F; color:#fff; padding:10px 18px; border-radius:8px; border:none; cursor:pointer; font-weight:700; }
    .secondary { background:#eee; color:#333; }
    .result { margin-top:14px; padding:12px; border-radius:8px; background:#f0fff9; border:1px solid #cdefe5; color:#084d3d; }
    a.back { display:inline-flex; align-items:center; gap:8px; color:#2A9D8F; text-decoration:none; margin-bottom:12px; }
  </style>
</head>
<body>
  <div class="container">
    <a class="back" href="INDEX.html"><i class="fa-solid fa-arrow-left"></i> Volver</a>
    <h1>Pedir Crédito</h1>
    <p class="lead">Formulario de demostración para solicitar un crédito agrícola. Los cálculos son ilustrativos.</p>

    <form id="creditForm">
      <div class="field">
        <label for="nombre">Nombre completo</label>
        <input id="nombre" name="nombre" type="text" required />
      </div>

      <div class="row">
        <div class="field" style="flex:1">
          <label for="monto">Monto solicitado (COP)</label>
          <input id="monto" name="monto" type="number" min="1" value="500000" required />
        </div>

        <div class="field" style="width:160px">
          <label for="plazo">Plazo (meses)</label>
          <select id="plazo" name="plazo">
            <option>3</option>
            <option>6</option>
            <option selected>12</option>
            <option>24</option>
          </select>
        </div>
      </div>

      <div class="field">
        <label for="actividad">Actividad (cultivo)</label>
        <input id="actividad" name="actividad" type="text" placeholder="Ej: Maíz, café..." />
      </div>

      <div class="actions">
        <button type="button" class="secondary" onclick="resetForm()">Limpiar</button>
        <button type="submit">Simular Solicitud</button>
      </div>

      <div id="output" class="result" style="display:none"></div>
    </form>
  </div>

  <script>
    const form = document.getElementById('creditForm');
    const output = document.getElementById('output');

    form.addEventListener('submit', function(e){
      e.preventDefault();
      const nombre = form.nombre.value.trim();
      const monto = Number(form.monto.value) || 0;
      const plazo = Number(form.plazo.value) || 1;

      // Demo: tasa fija ilustrativa
      const tasaAnual = 0.18; // 18% anual
      const tasaMensual = tasaAnual / 12;
      // Cuota aproximada usando fórmula de amortización (anualizada)
      const cuota = (monto * tasaMensual) / (1 - Math.pow(1 + tasaMensual, -plazo));
      const cuotaRounded = cuota ? cuota.toFixed(0) : 0;

      // Resultado mostrado en formato legible
      output.style.display = 'block';
      output.innerHTML = `
        <strong>Solicitud simulada para:</strong> ${escapeHtml(nombre)} <br/>
        <strong>Monto:</strong> ${monto.toLocaleString('es-CO')} COP<br/>
        <strong>Plazo:</strong> ${plazo} meses<br/>
        <strong>Tasa anual (estimada):</strong> ${(tasaAnual*100).toFixed(1)}%<br/>
        <strong>Cuota mensual estimada:</strong> ${Number(cuotaRounded).toLocaleString('es-CO')} COP<br/>
        <em>Esta es una simulación de demostración y no constituye una oferta real.</em>
      `;
    });

    function resetForm(){
      form.reset();
      output.style.display = 'none';
    }

    function escapeHtml(text) {
      return text.replace(/[&<>\"'\/]/g, function (s) {
        const entityMap = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': '&quot;', "'": '&#39;', "/": '&#x2F;' };
        return entityMap[s];
      });
    }
  </script>
</body>
</html>